<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBUS Pico: src/CBUSConfig.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-cbus.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBUS Pico
   &#160;<span id="projectnumber">1.0a</span>
   </div>
   <div id="projectbrief">Library Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('CBUSConfig_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CBUSConfig.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CBUSConfig_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">   CBUS Module Library - RasberryPi Pico SDK port</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   Copyright (c) Kevin Kimber 2023</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   Based on work by Duncan Greenwood</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   Copyright (C) Duncan Greenwood 2017 (duncan_greenwood@hotmail.com)</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   This work is licensed under the:</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">      Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   To view a copy of this license, visit:</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">      http://creativecommons.org/licenses/by-nc-sa/4.0/</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   License summary:</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    You are free to:</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">      Share, copy and redistribute the material in any medium or format</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">      Adapt, remix, transform, and build upon the material</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">    The licensor cannot revoke these freedoms as long as you follow the license terms.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    Attribution : You must give appropriate credit, provide a link to the license,</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">                  and indicate if changes were made. You may do so in any reasonable manner,</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">                  but not in any way that suggests the licensor endorses you or your use.</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">    NonCommercial : You may not use the material for commercial purposes. **(see note below)</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">    ShareAlike : If you remix, transform, or build upon the material, you must distribute</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">                 your contributions under the same license as the original.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">    No additional restrictions : You may not apply legal terms or technological measures that</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">                                 legally restrict others from doing anything the license permits.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment">   ** For commercial use, please contact the original copyright holder(s) to agree licensing terms</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">    This software is distributed in the hope that it will be useful, but WITHOUT ANY</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">    WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;hardware/i2c.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;hardware/flash.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// Forward declations</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">class </span><a class="code" href="classCBUSLED.html">CBUSLED</a>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keyword">class </span><a class="code" href="classCBUSSwitch.html">CBUSSwitch</a>;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">// in-memory hash table</span></div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#abf8c5aa435c974c1fb0bc8efae9cf327">   52</a></span>&#160;constexpr uint8_t <a class="code" href="CBUSConfig_8h.html#abf8c5aa435c974c1fb0bc8efae9cf327">EE_HASH_BYTES</a> = 4;</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#ad4a31b1ebb247de2d18d14b95d421a50">   53</a></span>&#160;constexpr uint8_t <a class="code" href="CBUSConfig_8h.html#ad4a31b1ebb247de2d18d14b95d421a50">HASH_LENGTH</a> = 128;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#aa4b2f94465ef75bc817eb4c5d7cc7341">   56</a></span>&#160;constexpr uint8_t <a class="code" href="CBUSConfig_8h.html#aa4b2f94465ef75bc817eb4c5d7cc7341">EEPROM_I2C_ADDR</a> = 0x50;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html">   59</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#ab1caaf288c499097b64c8cacfbfb8a8f">   61</a></span>&#160;   uint16_t <a class="code" href="CBUSConfig_8h.html#ab1caaf288c499097b64c8cacfbfb8a8f">nodeNumber</a>;  </div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#a2b578184907d751a3b4c4d928e309a87">   62</a></span>&#160;   uint16_t <a class="code" href="CBUSConfig_8h.html#a2b578184907d751a3b4c4d928e309a87">eventNumber</a>; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;} <a class="code" href="CBUSConfig_8h.html#structEVENT__INFO__t">EVENT_INFO_t</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5">   65</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5">EEPROM_TYPE</a></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <a class="code" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5a9fc6fff26d3c730cbcf29eeafabdb2a3">EEPROM_USES_FLASH</a>,  </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5a00b8bbf9d482498eeffa256bade10f54">EEPROM_EXTERNAL_I2C</a> </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="classCBUSConfig.html">   75</a></span>&#160;<span class="keyword">class </span><a class="code" href="classCBUSConfig.html">CBUSConfig</a></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <a class="code" href="classCBUSConfig.html#a1e53d5ef3d92fdc6847a598405f3ba7e">CBUSConfig</a>();</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="classCBUSConfig.html#adac58ad040940d6cf5c9588a4f43d5a2">~CBUSConfig</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="comment">// Initialization</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ae8b3fb7ae27b29b2c675946868b168a9">begin</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="comment">// Concurrency support</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a20b7b2c677281daa03b65306a64701d6">disableIRQs</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#aca286ebcea75ded72579ba2bc08f2712">enableIRQs</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   <span class="comment">// Event management</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a4c40ae0cb79627c29677295853145287">findExistingEvent</a>(uint16_t nn, uint16_t en);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a9e19c6bbca5888a43b29679b6883209d">findEventSpace</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="comment">// Event table and hash table management</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#aa87f55426e8326efb9ac13359b945f16">getEvTableEntry</a>(uint8_t tindex);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#ac144b400a84c160eed9b3c96dabe26b8">numEvents</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a4437d1ec71b80781ca1ae7b2568ba419">makeHash</a>(<a class="code" href="CBUSConfig_8h.html#structEVENT__INFO__t">EVENT_INFO_t</a>&amp; evInfo);</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a956788cd5ffc30cd1f6b07dbd60f4100">   97</a></span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a956788cd5ffc30cd1f6b07dbd60f4100">getEvArray</a>(uint8_t idx);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a289efa9f78e20e4d54369780ca2c1a8f">makeEvHashTable</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a148d9f7dc9510511692dc0dad51e739e">updateEvHashEntry</a>(uint8_t idx);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a56f7ec06530a60549bbbf75470f94247">clearEvHashTable</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classCBUSConfig.html#ab310500b44dc44d2cecf77cd5d9c6a48">check_hash_collisions</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a91bd21debc0ba4d1f6778080d8d8b8b8">getEventEVval</a>(uint8_t idx, uint8_t evnum);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ac96b00ab9124aac134eea2bfa670ad0a">writeEventEV</a>(uint8_t idx, uint8_t evnum, uint8_t evval);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="comment">// Node Variable management</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a1e339dd2b22017157219c86d35edf55e">readNV</a>(uint8_t idx);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a7734a2a1ed73adce143043e4e370c44a">writeNV</a>(uint8_t idx, uint8_t val);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ac911e839983ea7f628f2da7d04aaffa1">loadNVs</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="comment">// Event management</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#aa4c730daa126929d317eb04c914b25a1">readEvent</a>(uint8_t idx, <a class="code" href="CBUSConfig_8h.html#structEVENT__INFO__t">EVENT_INFO_t</a>&amp; evInfo);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a3955fd96d3fd81f71491b67168d4f687">writeEvent</a>(<span class="keyword">const</span> uint8_t index, <a class="code" href="CBUSConfig_8h.html#structEVENT__INFO__t">EVENT_INFO_t</a>&amp; evInfo, <span class="keywordtype">bool</span> bFlush=<span class="keyword">true</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#aeaa52ed7e8379a73c3880f066b9e3aa5">clearEventEEPROM</a>(uint8_t index, <span class="keywordtype">bool</span> bFlush=<span class="keyword">true</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a0491f42fd24f0f6af84b364a00d7faa7">clearEventsEEPROM</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a8e4dd6a2c956810bf6b1ed857e41bfc4">resetModule</a>(<a class="code" href="classCBUSLED.html">CBUSLED</a> &amp;green, <a class="code" href="classCBUSLED.html">CBUSLED</a> &amp;yellow, <a class="code" href="classCBUSSwitch.html">CBUSSwitch</a> &amp;sw);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a8e4dd6a2c956810bf6b1ed857e41bfc4">resetModule</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="comment">// EEPROM support</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#ad0e108d3555e88c8180abb2241e316ce">readEEPROM</a>(uint32_t eeaddress);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a4ca0b9ff6b51f1e14d0b0508f7b345ef">writeEEPROM</a>(uint32_t eeaddress, uint8_t data, <span class="keywordtype">bool</span> bFlush=<span class="keyword">true</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#af2b0a3e4e5a35bc482a1b32561c399d7">readBytesEEPROM</a>(uint32_t eeaddress, uint8_t nbytes, uint8_t dest[]);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#acee42ccaa317e13ce3ef420c362c1980">writeBytesEEPROM</a>(uint32_t eeaddress, uint8_t src[], uint8_t numbytes);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a4a335dbc6ebd43843eaf08188f92b6fc">resetEEPROM</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#af01635afc192d8f9e380426cfc79bf2a">commitChanges</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="comment">// CBUS Addressing</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classCBUSConfig.html#a705fa45b9345ead336abc4c2ee9b99e4">setCANID</a>(uint8_t canid);</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#aec9425bf280df64f9de81f8bf46e56da">  128</a></span>&#160;   <span class="keyword">inline</span> uint8_t <a class="code" href="classCBUSConfig.html#aec9425bf280df64f9de81f8bf46e56da">getCANID</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> m_canId; };</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a4d339abc268724fcbacb2b4866e68b10">setFLiM</a>(<span class="keywordtype">bool</span> flim);</div>
<div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a0b4dba3e5dc03c231966480a8de50505">  130</a></span>&#160;   <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classCBUSConfig.html#a0b4dba3e5dc03c231966480a8de50505">getFLiM</a>(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> m_bFLiM; };</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ad13530f85801222a58fe5f557e1ca295">setNodeNum</a>(uint32_t nn);</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a2e8bfa5d8df5645ce2892a1e3f059618">  132</a></span>&#160;   <span class="keyword">inline</span> uint32_t <a class="code" href="classCBUSConfig.html#a2e8bfa5d8df5645ce2892a1e3f059618">getNodeNum</a>() { <span class="keywordflow">return</span> m_nodeNum; };</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="comment">// Module reset management</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ab1fb6c9811dba38a123b0ecfdb71a25b">setResetFlag</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a07103250fa2082300f3dfe25f85f6a11">clearResetFlag</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classCBUSConfig.html#a8124b0cd1d0279e5e8f5a59ccaf0452b">isResetFlagSet</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="comment">// Flash EEPROM emulation</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a8e0f68d438741d1e108520f9dcee3303">getChipEEPROMVal</a>(uint32_t eeaddress);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#aa2f81a90805daf68bc0ba3fea4c691d4">setChipEEPROMVal</a>(uint32_t eeaddress, uint8_t val);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a4010188967b39919e33981f8ae457b52">flushToFlash</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="comment">// EEPROM addressing</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <span class="keywordtype">bool</span> <a class="code" href="classCBUSConfig.html#a640e633392cf9f6dcd5373504cb3973c">setEEPROMtype</a>(<a class="code" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5">EEPROM_TYPE</a> type);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#ab491da30c90d0607dd416674d6a267aa">setExtEEPROMAddress</a>(uint8_t address);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   uint32_t <a class="code" href="classCBUSConfig.html#a5088321f676e3b88064fbf16476610ae">freeSRAM</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordtype">void</span> <a class="code" href="classCBUSConfig.html#a1999e216c9144650022b54c6e958be7f">reboot</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a3008f04467c2d81b5dde752c66a10fbc">  151</a></span>&#160;   uint32_t <a class="code" href="classCBUSConfig.html#a3008f04467c2d81b5dde752c66a10fbc">EE_EVENTS_START</a>;   </div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a6365f4e814ac02db7c36ac4247126351">  152</a></span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a6365f4e814ac02db7c36ac4247126351">EE_MAX_EVENTS</a>;      </div>
<div class="line"><a name="l00153"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a97d273a0b6d22b3fc519ed26ed1033f7">  153</a></span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a97d273a0b6d22b3fc519ed26ed1033f7">EE_NUM_EVS</a>;         </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a76b788660447c0b1ae0c5689a98edfdc">  154</a></span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a76b788660447c0b1ae0c5689a98edfdc">EE_BYTES_PER_EVENT</a>; </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a5e2d9197398a3c537d92fb7e448f8e70">  155</a></span>&#160;   uint32_t <a class="code" href="classCBUSConfig.html#a5e2d9197398a3c537d92fb7e448f8e70">EE_NVS_START</a>;      </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classCBUSConfig.html#a90e99dfacf163a966cc13625b3e55e1d">  156</a></span>&#160;   uint8_t <a class="code" href="classCBUSConfig.html#a90e99dfacf163a966cc13625b3e55e1d">EE_NUM_NVS</a>;         </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   uint32_t m_intrStatus;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <a class="code" href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5">EEPROM_TYPE</a> m_eepromType;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   uint8_t m_externalAddress;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   i2c_inst_t *m_i2cBus;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   uint8_t *m_evhashtbl;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="keywordtype">bool</span> m_bHashCollisions;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordtype">bool</span> m_bFlashModified;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordtype">bool</span> m_bFlashZeroToOne;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   uint8_t m_flashBuf[FLASH_SECTOR_SIZE];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   uint8_t m_canId;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="keywordtype">bool</span> m_bFLiM;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   uint32_t m_nodeNum;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;};</div>
<div class="ttc" id="aCBUSConfig_8h_html_a2b578184907d751a3b4c4d928e309a87"><div class="ttname"><a href="CBUSConfig_8h.html#a2b578184907d751a3b4c4d928e309a87">EVENT_INFO_t::eventNumber</a></div><div class="ttdeci">uint16_t eventNumber</div><div class="ttdoc">Event number of the event.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:62</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_aa4b2f94465ef75bc817eb4c5d7cc7341"><div class="ttname"><a href="CBUSConfig_8h.html#aa4b2f94465ef75bc817eb4c5d7cc7341">EEPROM_I2C_ADDR</a></div><div class="ttdeci">constexpr uint8_t EEPROM_I2C_ADDR</div><div class="ttdoc">Default I2C address of the external EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:56</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_ab1caaf288c499097b64c8cacfbfb8a8f"><div class="ttname"><a href="CBUSConfig_8h.html#ab1caaf288c499097b64c8cacfbfb8a8f">EVENT_INFO_t::nodeNumber</a></div><div class="ttdeci">uint16_t nodeNumber</div><div class="ttdoc">Node number of the event.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:61</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_abf8c5aa435c974c1fb0bc8efae9cf327"><div class="ttname"><a href="CBUSConfig_8h.html#abf8c5aa435c974c1fb0bc8efae9cf327">EE_HASH_BYTES</a></div><div class="ttdeci">constexpr uint8_t EE_HASH_BYTES</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:52</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_ad4a31b1ebb247de2d18d14b95d421a50"><div class="ttname"><a href="CBUSConfig_8h.html#ad4a31b1ebb247de2d18d14b95d421a50">HASH_LENGTH</a></div><div class="ttdeci">constexpr uint8_t HASH_LENGTH</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:53</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_adde7669366ae3afb3c1774afdd3135f5"><div class="ttname"><a href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5">EEPROM_TYPE</a></div><div class="ttdeci">EEPROM_TYPE</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:66</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_adde7669366ae3afb3c1774afdd3135f5a00b8bbf9d482498eeffa256bade10f54"><div class="ttname"><a href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5a00b8bbf9d482498eeffa256bade10f54">EEPROM_TYPE::EEPROM_EXTERNAL_I2C</a></div><div class="ttdeci">@ EEPROM_EXTERNAL_I2C</div><div class="ttdoc">Use an external I2C EEPROM.</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_adde7669366ae3afb3c1774afdd3135f5a9fc6fff26d3c730cbcf29eeafabdb2a3"><div class="ttname"><a href="CBUSConfig_8h.html#adde7669366ae3afb3c1774afdd3135f5a9fc6fff26d3c730cbcf29eeafabdb2a3">EEPROM_TYPE::EEPROM_USES_FLASH</a></div><div class="ttdeci">@ EEPROM_USES_FLASH</div><div class="ttdoc">Use Pico QPSI flash as a pseudo EEPROM.</div></div>
<div class="ttc" id="aCBUSConfig_8h_html_structEVENT__INFO__t"><div class="ttname"><a href="CBUSConfig_8h.html#structEVENT__INFO__t">EVENT_INFO_t</a></div><div class="ttdoc">struct to hold event information</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:60</div></div>
<div class="ttc" id="aclassCBUSConfig_html"><div class="ttname"><a href="classCBUSConfig.html">CBUSConfig</a></div><div class="ttdoc">a class to encapsulate CBUS module configuration, events, NVs, EEPROM, etc</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:76</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a0491f42fd24f0f6af84b364a00d7faa7"><div class="ttname"><a href="classCBUSConfig.html#a0491f42fd24f0f6af84b364a00d7faa7">CBUSConfig::clearEventsEEPROM</a></div><div class="ttdeci">void clearEventsEEPROM(void)</div><div class="ttdoc">Clear all events from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:800</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a07103250fa2082300f3dfe25f85f6a11"><div class="ttname"><a href="classCBUSConfig.html#a07103250fa2082300f3dfe25f85f6a11">CBUSConfig::clearResetFlag</a></div><div class="ttdeci">void clearResetFlag(void)</div><div class="ttdoc">Clear the reset flag in the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1100</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a0b4dba3e5dc03c231966480a8de50505"><div class="ttname"><a href="classCBUSConfig.html#a0b4dba3e5dc03c231966480a8de50505">CBUSConfig::getFLiM</a></div><div class="ttdeci">bool getFLiM(void)</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:130</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a148d9f7dc9510511692dc0dad51e739e"><div class="ttname"><a href="classCBUSConfig.html#a148d9f7dc9510511692dc0dad51e739e">CBUSConfig::updateEvHashEntry</a></div><div class="ttdeci">void updateEvHashEntry(uint8_t idx)</div><div class="ttdoc">Update an event hash table entry.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:509</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a1999e216c9144650022b54c6e958be7f"><div class="ttname"><a href="classCBUSConfig.html#a1999e216c9144650022b54c6e958be7f">CBUSConfig::reboot</a></div><div class="ttdeci">void reboot(void)</div><div class="ttdoc">Initiate a reboot of the PICO.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:846</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a1e339dd2b22017157219c86d35edf55e"><div class="ttname"><a href="classCBUSConfig.html#a1e339dd2b22017157219c86d35edf55e">CBUSConfig::readNV</a></div><div class="ttdeci">uint8_t readNV(uint8_t idx)</div><div class="ttdoc">Read a Node Variable from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:585</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a1e53d5ef3d92fdc6847a598405f3ba7e"><div class="ttname"><a href="classCBUSConfig.html#a1e53d5ef3d92fdc6847a598405f3ba7e">CBUSConfig::CBUSConfig</a></div><div class="ttdeci">CBUSConfig()</div><div class="ttdoc">Construct a new CBUSConfig::CBUSConfig object.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:107</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a20b7b2c677281daa03b65306a64701d6"><div class="ttname"><a href="classCBUSConfig.html#a20b7b2c677281daa03b65306a64701d6">CBUSConfig::disableIRQs</a></div><div class="ttdeci">void disableIRQs(void)</div><div class="ttdoc">Disable interrupts and pause the second core.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:145</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a289efa9f78e20e4d54369780ca2c1a8f"><div class="ttname"><a href="classCBUSConfig.html#a289efa9f78e20e4d54369780ca2c1a8f">CBUSConfig::makeEvHashTable</a></div><div class="ttdeci">void makeEvHashTable(void)</div><div class="ttdoc">Rebuild the event hash table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:465</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a2e8bfa5d8df5645ce2892a1e3f059618"><div class="ttname"><a href="classCBUSConfig.html#a2e8bfa5d8df5645ce2892a1e3f059618">CBUSConfig::getNodeNum</a></div><div class="ttdeci">uint32_t getNodeNum()</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:132</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a3008f04467c2d81b5dde752c66a10fbc"><div class="ttname"><a href="classCBUSConfig.html#a3008f04467c2d81b5dde752c66a10fbc">CBUSConfig::EE_EVENTS_START</a></div><div class="ttdeci">uint32_t EE_EVENTS_START</div><div class="ttdoc">Externally accessed variables.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:151</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a3955fd96d3fd81f71491b67168d4f687"><div class="ttname"><a href="classCBUSConfig.html#a3955fd96d3fd81f71491b67168d4f687">CBUSConfig::writeEvent</a></div><div class="ttdeci">void writeEvent(const uint8_t index, EVENT_INFO_t &amp;evInfo, bool bFlush=true)</div><div class="ttdoc">Write an event to the event table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:769</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4010188967b39919e33981f8ae457b52"><div class="ttname"><a href="classCBUSConfig.html#a4010188967b39919e33981f8ae457b52">CBUSConfig::flushToFlash</a></div><div class="ttdeci">void flushToFlash(void)</div><div class="ttdoc">Flush RAM cache of Flash to Flash.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1041</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4437d1ec71b80781ca1ae7b2568ba419"><div class="ttname"><a href="classCBUSConfig.html#a4437d1ec71b80781ca1ae7b2568ba419">CBUSConfig::makeHash</a></div><div class="ttdeci">uint8_t makeHash(EVENT_INFO_t &amp;evInfo)</div><div class="ttdoc">Create a 8-bit hash from the combination of Node Number and Event Number.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:405</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4a335dbc6ebd43843eaf08188f92b6fc"><div class="ttname"><a href="classCBUSConfig.html#a4a335dbc6ebd43843eaf08188f92b6fc">CBUSConfig::resetEEPROM</a></div><div class="ttdeci">void resetEEPROM(void)</div><div class="ttdoc">Clear all event data in external EEPROM chip.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:815</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4c40ae0cb79627c29677295853145287"><div class="ttname"><a href="classCBUSConfig.html#a4c40ae0cb79627c29677295853145287">CBUSConfig::findExistingEvent</a></div><div class="ttdeci">uint8_t findExistingEvent(uint16_t nn, uint16_t en)</div><div class="ttdoc">Lookup an event by node number and event number, using the hash table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:302</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4ca0b9ff6b51f1e14d0b0508f7b345ef"><div class="ttname"><a href="classCBUSConfig.html#a4ca0b9ff6b51f1e14d0b0508f7b345ef">CBUSConfig::writeEEPROM</a></div><div class="ttdeci">void writeEEPROM(uint32_t eeaddress, uint8_t data, bool bFlush=true)</div><div class="ttdoc">Write a byte to the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:683</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a4d339abc268724fcbacb2b4866e68b10"><div class="ttname"><a href="classCBUSConfig.html#a4d339abc268724fcbacb2b4866e68b10">CBUSConfig::setFLiM</a></div><div class="ttdeci">void setFLiM(bool flim)</div><div class="ttdoc">Store the FLiM mode and cache the value.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:257</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a5088321f676e3b88064fbf16476610ae"><div class="ttname"><a href="classCBUSConfig.html#a5088321f676e3b88064fbf16476610ae">CBUSConfig::freeSRAM</a></div><div class="ttdeci">uint32_t freeSRAM(void)</div><div class="ttdoc">Determine the amount of free memory.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:857</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a56f7ec06530a60549bbbf75470f94247"><div class="ttname"><a href="classCBUSConfig.html#a56f7ec06530a60549bbbf75470f94247">CBUSConfig::clearEvHashTable</a></div><div class="ttdeci">void clearEvHashTable(void)</div><div class="ttdoc">Clear the event hash table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:532</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a5e2d9197398a3c537d92fb7e448f8e70"><div class="ttname"><a href="classCBUSConfig.html#a5e2d9197398a3c537d92fb7e448f8e70">CBUSConfig::EE_NVS_START</a></div><div class="ttdeci">uint32_t EE_NVS_START</div><div class="ttdoc">Start offset of Node Variables.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:155</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a6365f4e814ac02db7c36ac4247126351"><div class="ttname"><a href="classCBUSConfig.html#a6365f4e814ac02db7c36ac4247126351">CBUSConfig::EE_MAX_EVENTS</a></div><div class="ttdeci">uint8_t EE_MAX_EVENTS</div><div class="ttdoc">Maximum number of events.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:152</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a640e633392cf9f6dcd5373504cb3973c"><div class="ttname"><a href="classCBUSConfig.html#a640e633392cf9f6dcd5373504cb3973c">CBUSConfig::setEEPROMtype</a></div><div class="ttdeci">bool setEEPROMtype(EEPROM_TYPE type)</div><div class="ttdoc">Set the type of storage in use, either QSPI flash or an external I2C EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:205</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a705fa45b9345ead336abc4c2ee9b99e4"><div class="ttname"><a href="classCBUSConfig.html#a705fa45b9345ead336abc4c2ee9b99e4">CBUSConfig::setCANID</a></div><div class="ttdeci">bool setCANID(uint8_t canid)</div><div class="ttdoc">Store the CANID and cache the valie.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:269</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a76b788660447c0b1ae0c5689a98edfdc"><div class="ttname"><a href="classCBUSConfig.html#a76b788660447c0b1ae0c5689a98edfdc">CBUSConfig::EE_BYTES_PER_EVENT</a></div><div class="ttdeci">uint8_t EE_BYTES_PER_EVENT</div><div class="ttdoc">Number of bytes per event (includes 16bit CAN ID and Node Number)</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:154</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a7734a2a1ed73adce143043e4e370c44a"><div class="ttname"><a href="classCBUSConfig.html#a7734a2a1ed73adce143043e4e370c44a">CBUSConfig::writeNV</a></div><div class="ttdeci">void writeNV(uint8_t idx, uint8_t val)</div><div class="ttdoc">Write a Node Variable to the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:596</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a8124b0cd1d0279e5e8f5a59ccaf0452b"><div class="ttname"><a href="classCBUSConfig.html#a8124b0cd1d0279e5e8f5a59ccaf0452b">CBUSConfig::isResetFlagSet</a></div><div class="ttdeci">bool isResetFlagSet(void)</div><div class="ttdoc">Determine if the Reset flag is set in the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1111</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a8e0f68d438741d1e108520f9dcee3303"><div class="ttname"><a href="classCBUSConfig.html#a8e0f68d438741d1e108520f9dcee3303">CBUSConfig::getChipEEPROMVal</a></div><div class="ttdeci">uint8_t getChipEEPROMVal(uint32_t eeaddress)</div><div class="ttdoc">Read a byte value from the RAM cache of flash data.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1070</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a8e4dd6a2c956810bf6b1ed857e41bfc4"><div class="ttname"><a href="classCBUSConfig.html#a8e4dd6a2c956810bf6b1ed857e41bfc4">CBUSConfig::resetModule</a></div><div class="ttdeci">void resetModule(void)</div><div class="ttdoc">Perform a factory reset of the module.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:919</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a90e99dfacf163a966cc13625b3e55e1d"><div class="ttname"><a href="classCBUSConfig.html#a90e99dfacf163a966cc13625b3e55e1d">CBUSConfig::EE_NUM_NVS</a></div><div class="ttdeci">uint8_t EE_NUM_NVS</div><div class="ttdoc">Number of Node Variables.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:156</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a91bd21debc0ba4d1f6778080d8d8b8b8"><div class="ttname"><a href="classCBUSConfig.html#a91bd21debc0ba4d1f6778080d8d8b8b8">CBUSConfig::getEventEVval</a></div><div class="ttdeci">uint8_t getEventEVval(uint8_t idx, uint8_t evnum)</div><div class="ttdoc">Read an event variable from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:444</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a956788cd5ffc30cd1f6b07dbd60f4100"><div class="ttname"><a href="classCBUSConfig.html#a956788cd5ffc30cd1f6b07dbd60f4100">CBUSConfig::getEvArray</a></div><div class="ttdeci">void getEvArray(uint8_t idx)</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a97d273a0b6d22b3fc519ed26ed1033f7"><div class="ttname"><a href="classCBUSConfig.html#a97d273a0b6d22b3fc519ed26ed1033f7">CBUSConfig::EE_NUM_EVS</a></div><div class="ttdeci">uint8_t EE_NUM_EVS</div><div class="ttdoc">Number of event variables per event.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:153</div></div>
<div class="ttc" id="aclassCBUSConfig_html_a9e19c6bbca5888a43b29679b6883209d"><div class="ttname"><a href="classCBUSConfig.html#a9e19c6bbca5888a43b29679b6883209d">CBUSConfig::findEventSpace</a></div><div class="ttdeci">uint8_t findEventSpace(void)</div><div class="ttdoc">Find first empty slot in the Event Table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:384</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aa2f81a90805daf68bc0ba3fea4c691d4"><div class="ttname"><a href="classCBUSConfig.html#aa2f81a90805daf68bc0ba3fea4c691d4">CBUSConfig::setChipEEPROMVal</a></div><div class="ttdeci">void setChipEEPROMVal(uint32_t eeaddress, uint8_t val)</div><div class="ttdoc">Write a byte value to the RAM flash cache, must be followed up with a call to flushToFlash.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1013</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aa4c730daa126929d317eb04c914b25a1"><div class="ttname"><a href="classCBUSConfig.html#aa4c730daa126929d317eb04c914b25a1">CBUSConfig::readEvent</a></div><div class="ttdeci">void readEvent(uint8_t idx, EVENT_INFO_t &amp;evInfo)</div><div class="ttdoc">Read an event from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:428</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aa87f55426e8326efb9ac13359b945f16"><div class="ttname"><a href="classCBUSConfig.html#aa87f55426e8326efb9ac13359b945f16">CBUSConfig::getEvTableEntry</a></div><div class="ttdeci">uint8_t getEvTableEntry(uint8_t tindex)</div><div class="ttdoc">return a single hash table entry by index</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:567</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ab1fb6c9811dba38a123b0ecfdb71a25b"><div class="ttname"><a href="classCBUSConfig.html#ab1fb6c9811dba38a123b0ecfdb71a25b">CBUSConfig::setResetFlag</a></div><div class="ttdeci">void setResetFlag(void)</div><div class="ttdoc">Set the reset flag in the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:1092</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ab310500b44dc44d2cecf77cd5d9c6a48"><div class="ttname"><a href="classCBUSConfig.html#ab310500b44dc44d2cecf77cd5d9c6a48">CBUSConfig::check_hash_collisions</a></div><div class="ttdeci">bool check_hash_collisions(void)</div><div class="ttdoc">Check for any existing hash clashes between different configured events.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:989</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ab491da30c90d0607dd416674d6a267aa"><div class="ttname"><a href="classCBUSConfig.html#ab491da30c90d0607dd416674d6a267aa">CBUSConfig::setExtEEPROMAddress</a></div><div class="ttdeci">void setExtEEPROMAddress(uint8_t address)</div><div class="ttdoc">Set the address of the external EEPROM devices on the I2C bus.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:247</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ac144b400a84c160eed9b3c96dabe26b8"><div class="ttname"><a href="classCBUSConfig.html#ac144b400a84c160eed9b3c96dabe26b8">CBUSConfig::numEvents</a></div><div class="ttdeci">uint8_t numEvents(void)</div><div class="ttdoc">Retrieve the number of currently configure / stored events.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:548</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ac911e839983ea7f628f2da7d04aaffa1"><div class="ttname"><a href="classCBUSConfig.html#ac911e839983ea7f628f2da7d04aaffa1">CBUSConfig::loadNVs</a></div><div class="ttdeci">void loadNVs(void)</div><div class="ttdoc">Load the global node variables from EEPROM Will set defaults if the EEPROM is unitialized.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:961</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ac96b00ab9124aac134eea2bfa670ad0a"><div class="ttname"><a href="classCBUSConfig.html#ac96b00ab9124aac134eea2bfa670ad0a">CBUSConfig::writeEventEV</a></div><div class="ttdeci">void writeEventEV(uint8_t idx, uint8_t evnum, uint8_t evval)</div><div class="ttdoc">Write an event variable to the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:456</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aca286ebcea75ded72579ba2bc08f2712"><div class="ttname"><a href="classCBUSConfig.html#aca286ebcea75ded72579ba2bc08f2712">CBUSConfig::enableIRQs</a></div><div class="ttdeci">void enableIRQs(void)</div><div class="ttdoc">Enable interrups and re-enable the second core.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:157</div></div>
<div class="ttc" id="aclassCBUSConfig_html_acee42ccaa317e13ce3ef420c362c1980"><div class="ttname"><a href="classCBUSConfig.html#acee42ccaa317e13ce3ef420c362c1980">CBUSConfig::writeBytesEEPROM</a></div><div class="ttdeci">void writeBytesEEPROM(uint32_t eeaddress, uint8_t src[], uint8_t numbytes)</div><div class="ttdoc">Write a number of bytes to the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:721</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ad0e108d3555e88c8180abb2241e316ce"><div class="ttname"><a href="classCBUSConfig.html#ad0e108d3555e88c8180abb2241e316ce">CBUSConfig::readEEPROM</a></div><div class="ttdeci">uint8_t readEEPROM(uint32_t eeaddress)</div><div class="ttdoc">Read a single byte from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:607</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ad13530f85801222a58fe5f557e1ca295"><div class="ttname"><a href="classCBUSConfig.html#ad13530f85801222a58fe5f557e1ca295">CBUSConfig::setNodeNum</a></div><div class="ttdeci">void setNodeNum(uint32_t nn)</div><div class="ttdoc">Store the Node Number and cache the value.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:287</div></div>
<div class="ttc" id="aclassCBUSConfig_html_adac58ad040940d6cf5c9588a4f43d5a2"><div class="ttname"><a href="classCBUSConfig.html#adac58ad040940d6cf5c9588a4f43d5a2">CBUSConfig::~CBUSConfig</a></div><div class="ttdeci">~CBUSConfig()</div><div class="ttdoc">Destroy the CBUSConfig::CBUSConfig object Cleans-up the hash table.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:132</div></div>
<div class="ttc" id="aclassCBUSConfig_html_ae8b3fb7ae27b29b2c675946868b168a9"><div class="ttname"><a href="classCBUSConfig.html#ae8b3fb7ae27b29b2c675946868b168a9">CBUSConfig::begin</a></div><div class="ttdeci">void begin(void)</div><div class="ttdoc">initialise and set default values</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:169</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aeaa52ed7e8379a73c3880f066b9e3aa5"><div class="ttname"><a href="classCBUSConfig.html#aeaa52ed7e8379a73c3880f066b9e3aa5">CBUSConfig::clearEventEEPROM</a></div><div class="ttdeci">void clearEventEEPROM(uint8_t index, bool bFlush=true)</div><div class="ttdoc">Clear an event from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:792</div></div>
<div class="ttc" id="aclassCBUSConfig_html_aec9425bf280df64f9de81f8bf46e56da"><div class="ttname"><a href="classCBUSConfig.html#aec9425bf280df64f9de81f8bf46e56da">CBUSConfig::getCANID</a></div><div class="ttdeci">uint8_t getCANID(void)</div><div class="ttdef"><b>Definition:</b> CBUSConfig.h:128</div></div>
<div class="ttc" id="aclassCBUSConfig_html_af01635afc192d8f9e380426cfc79bf2a"><div class="ttname"><a href="classCBUSConfig.html#af01635afc192d8f9e380426cfc79bf2a">CBUSConfig::commitChanges</a></div><div class="ttdeci">void commitChanges(void)</div><div class="ttdoc">Commit changes to flash.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:831</div></div>
<div class="ttc" id="aclassCBUSConfig_html_af2b0a3e4e5a35bc482a1b32561c399d7"><div class="ttname"><a href="classCBUSConfig.html#af2b0a3e4e5a35bc482a1b32561c399d7">CBUSConfig::readBytesEEPROM</a></div><div class="ttdeci">uint8_t readBytesEEPROM(uint32_t eeaddress, uint8_t nbytes, uint8_t dest[])</div><div class="ttdoc">Read a number of bytes of data from the EEPROM.</div><div class="ttdef"><b>Definition:</b> CBUSConfig.cpp:643</div></div>
<div class="ttc" id="aclassCBUSLED_html"><div class="ttname"><a href="classCBUSLED.html">CBUSLED</a></div><div class="ttdoc">class to encapsulate a non-blocking LED</div><div class="ttdef"><b>Definition:</b> CBUSLED.h:49</div></div>
<div class="ttc" id="aclassCBUSSwitch_html"><div class="ttname"><a href="classCBUSSwitch.html">CBUSSwitch</a></div><div class="ttdoc">Class to encapsulate a non-blocking switch class.</div><div class="ttdef"><b>Definition:</b> CBUSSwitch.h:49</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="CBUSConfig_8h.html">CBUSConfig.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
