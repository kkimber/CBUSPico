<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CBUS Pico: CBUSLongMessageEx Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-cbus.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CBUS Pico
   &#160;<span id="projectnumber">1.0a</span>
   </div>
   <div id="projectbrief">Library Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classCBUSLongMessageEx.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCBUSLongMessageEx-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CBUSLongMessageEx Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A derived class to extend the base long message class to handle multiple concurrent messages, sending and receiving.  
 <a href="classCBUSLongMessageEx.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CBUS_8h_source.html">CBUS.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CBUSLongMessageEx:</div>
<div class="dyncontent">
<div class="center"><img src="classCBUSLongMessageEx__inherit__graph.png" border="0" usemap="#aCBUSLongMessageEx_inherit__map" alt="Inheritance graph"/></div>
<map name="aCBUSLongMessageEx_inherit__map" id="aCBUSLongMessageEx_inherit__map">
<area shape="rect" title="A derived class to extend the base long message class to handle multiple concurrent messages,..." alt="" coords="5,80,168,107"/>
<area shape="rect" href="classCBUSLongMessage.html" title="A basic class to send and receive CBUS long messages per MERG RFC 0005, handles a single message,..." alt="" coords="13,5,160,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for CBUSLongMessageEx:</div>
<div class="dyncontent">
<div class="center"><img src="classCBUSLongMessageEx__coll__graph.png" border="0" usemap="#aCBUSLongMessageEx_coll__map" alt="Collaboration graph"/></div>
<map name="aCBUSLongMessageEx_coll__map" id="aCBUSLongMessageEx_coll__map">
<area shape="rect" title="A derived class to extend the base long message class to handle multiple concurrent messages,..." alt="" coords="341,5,504,32"/>
<area shape="rect" href="classCBUSLongMessage.html" title="A basic class to send and receive CBUS long messages per MERG RFC 0005, handles a single message,..." alt="" coords="5,40,152,67"/>
<area shape="rect" href="classCBUSbase.html" title="An abstract class to encapsulate CAN bus and CBUS processing for a CBUS module, it must be implemente..." alt="" coords="378,247,467,273"/>
<area shape="rect" href="CBUSParams_8h.html#structcbusparam__t" title="Type for holding configuration parameters, size is plus one to include param zero,..." alt="" coords="25,123,132,149"/>
<area shape="rect" href="classCBUSSwitch.html" title="Class to encapsulate a non&#45;blocking switch class." alt="" coords="28,173,129,200"/>
<area shape="rect" href="CBUS_8h.html#structmodule__name__t" title="Type for holding the Module Name." alt="" coords="15,224,142,251"/>
<area shape="rect" href="classCBUSGridConnect.html" title=" " alt="" coords="9,275,148,301"/>
<area shape="rect" href="classCBUSConfig.html" title="a class to encapsulate CBUS module configuration, events, NVs, EEPROM, etc" alt="" coords="29,325,128,352"/>
<area shape="rect" href="classCBUSLED.html" title="class to encapsulate a non&#45;blocking LED" alt="" coords="37,376,120,403"/>
<area shape="rect" href="CBUSCircularBuffer_8h.html#classCANFrame" title="Class to hold a CAN/CBUS frame." alt="" coords="33,451,124,477"/>
<area shape="rect" href="classCBUScoe.html" title="A class to manage consuming&#45;own&#45;CBUS events." alt="" coords="38,501,119,528"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc04d8b5b126d339400851414b8889a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#acc04d8b5b126d339400851414b8889a2">CBUSLongMessageEx</a> (<a class="el" href="classCBUSbase.html">CBUSbase</a> *cbus_object_ptr)</td></tr>
<tr class="separator:acc04d8b5b126d339400851414b8889a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f59178c1770a758b2708008db851d1b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a5f59178c1770a758b2708008db851d1b">~CBUSLongMessageEx</a> ()</td></tr>
<tr class="separator:a5f59178c1770a758b2708008db851d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a0d2aaf7e4ee5de34ac04c2f2c295fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a2a0d2aaf7e4ee5de34ac04c2f2c295fe">allocateContexts</a> (uint8_t num_receive_contexts=<a class="el" href="CBUS_8h.html#a6f46ab1bb4a2e87ccfe8047a6bfe9be1">NUM_EX_CONTEXTS</a>, uint32_t receive_buffer_len=<a class="el" href="CBUS_8h.html#aa4ab80178bfb7c9b9ad8e2c251482fd2">EX_BUFFER_LEN</a>, uint8_t num_send_contexts=<a class="el" href="CBUS_8h.html#a6f46ab1bb4a2e87ccfe8047a6bfe9be1">NUM_EX_CONTEXTS</a>)</td></tr>
<tr class="memdesc:a2a0d2aaf7e4ee5de34ac04c2f2c295fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">allocate memory for receive and send contexts  <a href="classCBUSLongMessageEx.html#a2a0d2aaf7e4ee5de34ac04c2f2c295fe">More...</a><br /></td></tr>
<tr class="separator:a2a0d2aaf7e4ee5de34ac04c2f2c295fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68565f494c27692d8ffa81aafd2fadfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a68565f494c27692d8ffa81aafd2fadfc">sendLongMessage</a> (const void *<a class="el" href="CBUSACAN2040_8cpp.html#a8a9bf1c088ccfcbd220ac27a3ee6a7dc">msg</a>, const uint32_t msg_len, const uint8_t stream_id, const uint8_t priority=<a class="el" href="CBUS_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>)</td></tr>
<tr class="separator:a68565f494c27692d8ffa81aafd2fadfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa95b3c27714bedaf8c78d392e5a7d392"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#aa95b3c27714bedaf8c78d392e5a7d392">process</a> (void)</td></tr>
<tr class="separator:aa95b3c27714bedaf8c78d392e5a7d392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37181f114e927d90b26c8e2ff8854f14"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a37181f114e927d90b26c8e2ff8854f14">subscribe</a> (uint8_t *stream_ids, const uint8_t num_stream_ids, void(*messagehandler)(void *<a class="el" href="CBUSACAN2040_8cpp.html#a8a9bf1c088ccfcbd220ac27a3ee6a7dc">msg</a>, uint32_t msg_len, uint8_t stream_id, uint8_t status))</td></tr>
<tr class="memdesc:a37181f114e927d90b26c8e2ff8854f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">subscribe to a range of stream IDs  <a href="classCBUSLongMessageEx.html#a37181f114e927d90b26c8e2ff8854f14">More...</a><br /></td></tr>
<tr class="separator:a37181f114e927d90b26c8e2ff8854f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035efe13743c2a713434f35a84236a43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a035efe13743c2a713434f35a84236a43">processReceivedMessageFragment</a> (const <a class="el" href="CBUSCircularBuffer_8h.html#classCANFrame">CANFrame</a> &amp;frame) override</td></tr>
<tr class="memdesc:a035efe13743c2a713434f35a84236a43"><td class="mdescLeft">&#160;</td><td class="mdescRight">handle an incoming long message CBUS message fragment  <a href="classCBUSLongMessageEx.html#a035efe13743c2a713434f35a84236a43">More...</a><br /></td></tr>
<tr class="separator:a035efe13743c2a713434f35a84236a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab668468a0918e79b0dcbd7ac87c62524"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#ab668468a0918e79b0dcbd7ac87c62524">is_sending</a> (void)</td></tr>
<tr class="separator:ab668468a0918e79b0dcbd7ac87c62524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99490d640c0524624e498cf72d67484f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessageEx.html#a99490d640c0524624e498cf72d67484f">use_crc</a> (bool use_crc)</td></tr>
<tr class="memdesc:a99490d640c0524624e498cf72d67484f"><td class="mdescLeft">&#160;</td><td class="mdescRight">set whether to calculate and compare a CRC of the message  <a href="classCBUSLongMessageEx.html#a99490d640c0524624e498cf72d67484f">More...</a><br /></td></tr>
<tr class="separator:a99490d640c0524624e498cf72d67484f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCBUSLongMessage"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCBUSLongMessage')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCBUSLongMessage.html">CBUSLongMessage</a></td></tr>
<tr class="memitem:aca09cec4ecd3d69aa0192501943092a5 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#aca09cec4ecd3d69aa0192501943092a5">CBUSLongMessage</a> (<a class="el" href="classCBUSbase.html">CBUSbase</a> *cbus_object_ptr)</td></tr>
<tr class="separator:aca09cec4ecd3d69aa0192501943092a5 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a738394ba43e73985860fac2922fa9ea2 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a738394ba43e73985860fac2922fa9ea2">sendLongMessage</a> (const void *<a class="el" href="CBUSACAN2040_8cpp.html#a8a9bf1c088ccfcbd220ac27a3ee6a7dc">msg</a>, const uint32_t msg_len, const uint8_t stream_id, const uint8_t priority=<a class="el" href="CBUS_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a>)</td></tr>
<tr class="separator:a738394ba43e73985860fac2922fa9ea2 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2e1d0ce18131c5e91cbba2efb3dd703 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#ab2e1d0ce18131c5e91cbba2efb3dd703">subscribe</a> (uint8_t *stream_ids, const uint8_t num_stream_ids, void *receive_buffer, const uint32_t receive_buffer_len, void(*messagehandler)(void *fragment, const uint32_t fragment_len, const uint8_t stream_id, const uint8_t status))</td></tr>
<tr class="memdesc:ab2e1d0ce18131c5e91cbba2efb3dd703 inherit pub_methods_classCBUSLongMessage"><td class="mdescLeft">&#160;</td><td class="mdescRight">subscribe to a range of stream IDs  <a href="classCBUSLongMessage.html#ab2e1d0ce18131c5e91cbba2efb3dd703">More...</a><br /></td></tr>
<tr class="separator:ab2e1d0ce18131c5e91cbba2efb3dd703 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab187f483cac90b18308677c336eadb86 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#ab187f483cac90b18308677c336eadb86">process</a> (void)</td></tr>
<tr class="separator:ab187f483cac90b18308677c336eadb86 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50db8af5498e58b2c62a19fb537ee5a0 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a50db8af5498e58b2c62a19fb537ee5a0">is_sending</a> (void)</td></tr>
<tr class="separator:a50db8af5498e58b2c62a19fb537ee5a0 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07af8de3b247fe5e42440926d9f7209a inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a07af8de3b247fe5e42440926d9f7209a">setDelay</a> (uint8_t delay_in_millis)</td></tr>
<tr class="separator:a07af8de3b247fe5e42440926d9f7209a inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3653b7acf13a8f3624b65ad25f1d47b0 inherit pub_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a3653b7acf13a8f3624b65ad25f1d47b0">setTimeout</a> (uint32_t timeout_in_millis)</td></tr>
<tr class="separator:a3653b7acf13a8f3624b65ad25f1d47b0 inherit pub_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classCBUSLongMessage"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classCBUSLongMessage')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classCBUSLongMessage.html">CBUSLongMessage</a></td></tr>
<tr class="memitem:a46573796f5c55b462e986d16c3abf282 inherit pro_methods_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a46573796f5c55b462e986d16c3abf282">sendMessageFragment</a> (<a class="el" href="CBUSCircularBuffer_8h.html#classCANFrame">CANFrame</a> &amp;frame, const uint8_t priority)</td></tr>
<tr class="memdesc:a46573796f5c55b462e986d16c3abf282 inherit pro_methods_classCBUSLongMessage"><td class="mdescLeft">&#160;</td><td class="mdescRight">send next message fragment  <a href="classCBUSLongMessage.html#a46573796f5c55b462e986d16c3abf282">More...</a><br /></td></tr>
<tr class="separator:a46573796f5c55b462e986d16c3abf282 inherit pro_methods_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCBUSLongMessage"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCBUSLongMessage')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCBUSLongMessage.html">CBUSLongMessage</a></td></tr>
<tr class="memitem:acc157bcb7fae23aba4a406ed7a495395 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#acc157bcb7fae23aba4a406ed7a495395">_is_receiving</a> = false</td></tr>
<tr class="separator:acc157bcb7fae23aba4a406ed7a495395 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c3313852177c6c088e1efd79695587f inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a8c3313852177c6c088e1efd79695587f">_send_buffer</a> = nullptr</td></tr>
<tr class="separator:a8c3313852177c6c088e1efd79695587f inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad1b2b2cc14d2145d5b54560b0d2f741 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#aad1b2b2cc14d2145d5b54560b0d2f741">_receive_buffer</a> = nullptr</td></tr>
<tr class="separator:aad1b2b2cc14d2145d5b54560b0d2f741 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0495700839cf93a19be64e99f59c9950 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a0495700839cf93a19be64e99f59c9950">_send_stream_id</a> = 0</td></tr>
<tr class="separator:a0495700839cf93a19be64e99f59c9950 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d552654c5552dd25d59c4a3f3541318 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a4d552654c5552dd25d59c4a3f3541318">_receive_stream_id</a> = 0</td></tr>
<tr class="separator:a4d552654c5552dd25d59c4a3f3541318 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1c8cf498060b3dbadb7e8bc9839ebc inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a2b1c8cf498060b3dbadb7e8bc9839ebc">_stream_ids</a> = nullptr</td></tr>
<tr class="separator:a2b1c8cf498060b3dbadb7e8bc9839ebc inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6647ade61ae33c2a0d80e30415f6de9f inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a6647ade61ae33c2a0d80e30415f6de9f">_num_stream_ids</a> = 0</td></tr>
<tr class="separator:a6647ade61ae33c2a0d80e30415f6de9f inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d8a7a7a40f8da9cc59a1f76239c4038 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a7d8a7a7a40f8da9cc59a1f76239c4038">_send_priority</a> = <a class="el" href="CBUS_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a></td></tr>
<tr class="separator:a7d8a7a7a40f8da9cc59a1f76239c4038 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89ea9a350f44b90cc0f0cb2b5b679dde inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a89ea9a350f44b90cc0f0cb2b5b679dde">_msg_delay</a> = <a class="el" href="CBUS_8h.html#ade886bd57464690e87f109817c359679">LONG_MESSAGE_DEFAULT_DELAY</a></td></tr>
<tr class="separator:a89ea9a350f44b90cc0f0cb2b5b679dde inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed7df406476c6e4be653be2caebe654d inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#aed7df406476c6e4be653be2caebe654d">_sender_canid</a> = 0</td></tr>
<tr class="separator:aed7df406476c6e4be653be2caebe654d inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44df30974617d4ee02f9434ce8d570db inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a44df30974617d4ee02f9434ce8d570db">_send_buffer_len</a> = 0</td></tr>
<tr class="separator:a44df30974617d4ee02f9434ce8d570db inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7257c1868f3c9d03b41189ea184a68d1 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a7257c1868f3c9d03b41189ea184a68d1">_incoming_message_length</a> = 0</td></tr>
<tr class="separator:a7257c1868f3c9d03b41189ea184a68d1 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab60438884d74f0a87a31a0e7e82e5e77 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#ab60438884d74f0a87a31a0e7e82e5e77">_receive_buffer_len</a> = 0</td></tr>
<tr class="separator:ab60438884d74f0a87a31a0e7e82e5e77 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb2b58146348ed9f39c133eb2a86922a inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#acb2b58146348ed9f39c133eb2a86922a">_receive_buffer_index</a> = 0</td></tr>
<tr class="separator:acb2b58146348ed9f39c133eb2a86922a inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e18e4e3e23c11d7a45b43dabe48b649 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a4e18e4e3e23c11d7a45b43dabe48b649">_send_buffer_index</a> = 0</td></tr>
<tr class="separator:a4e18e4e3e23c11d7a45b43dabe48b649 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01a48551cd32702b9e61c2f2ca44adc inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#ae01a48551cd32702b9e61c2f2ca44adc">_incoming_message_crc</a> = 0</td></tr>
<tr class="separator:ae01a48551cd32702b9e61c2f2ca44adc inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a94b54bf9d26ae48beb04e6d37ec020 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a2a94b54bf9d26ae48beb04e6d37ec020">_incoming_bytes_received</a> = 0</td></tr>
<tr class="separator:a2a94b54bf9d26ae48beb04e6d37ec020 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65cb7b4471e60139c6c02424a44be2ab inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a65cb7b4471e60139c6c02424a44be2ab">_receive_timeout</a> = <a class="el" href="CBUS_8h.html#a4d2cdf90ee3f656a2ab67e118f4e0efc">LONG_MESSAGE_RECEIVE_TIMEOUT</a></td></tr>
<tr class="separator:a65cb7b4471e60139c6c02424a44be2ab inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7926b5074476ae25151c3d1838dbb3a4 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a7926b5074476ae25151c3d1838dbb3a4">_send_sequence_num</a> = 0</td></tr>
<tr class="separator:a7926b5074476ae25151c3d1838dbb3a4 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4ea0eaf447d0dc45771d2ae10f82e7d inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#ae4ea0eaf447d0dc45771d2ae10f82e7d">_expected_next_receive_sequence_num</a> = 0</td></tr>
<tr class="separator:ae4ea0eaf447d0dc45771d2ae10f82e7d inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1a543659701f03231778de529087647 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#aa1a543659701f03231778de529087647">_last_fragment_sent</a> = 0UL</td></tr>
<tr class="separator:aa1a543659701f03231778de529087647 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af65b97d45b573e96d84c6c6ab4fc4e0f inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#af65b97d45b573e96d84c6c6ab4fc4e0f">_last_fragment_received</a> = 0UL</td></tr>
<tr class="separator:af65b97d45b573e96d84c6c6ab4fc4e0f inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9e8ac0d5b20a3c4db2601e4dae2337 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="CBUS_8h.html#a91013b482524acb97560dcb753d3a6f5">longMessageCallback_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#abc9e8ac0d5b20a3c4db2601e4dae2337">_messagehandler</a></td></tr>
<tr class="separator:abc9e8ac0d5b20a3c4db2601e4dae2337 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d11846ec4a7c1c0cfc0b393aca4b514 inherit pro_attribs_classCBUSLongMessage"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCBUSbase.html">CBUSbase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCBUSLongMessage.html#a8d11846ec4a7c1c0cfc0b393aca4b514">_cbus_object_ptr</a></td></tr>
<tr class="separator:a8d11846ec4a7c1c0cfc0b393aca4b514 inherit pro_attribs_classCBUSLongMessage"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A derived class to extend the base long message class to handle multiple concurrent messages, sending and receiving. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acc04d8b5b126d339400851414b8889a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc04d8b5b126d339400851414b8889a2">&#9670;&nbsp;</a></span>CBUSLongMessageEx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CBUSLongMessageEx::CBUSLongMessageEx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCBUSbase.html">CBUSbase</a> *&#160;</td>
          <td class="paramname"><em>cbus_object_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5f59178c1770a758b2708008db851d1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f59178c1770a758b2708008db851d1b">&#9670;&nbsp;</a></span>~CBUSLongMessageEx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CBUSLongMessageEx::~CBUSLongMessageEx </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2a0d2aaf7e4ee5de34ac04c2f2c295fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a0d2aaf7e4ee5de34ac04c2f2c295fe">&#9670;&nbsp;</a></span>allocateContexts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CBUSLongMessageEx::allocateContexts </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_receive_contexts</em> = <code><a class="el" href="CBUS_8h.html#a6f46ab1bb4a2e87ccfe8047a6bfe9be1">NUM_EX_CONTEXTS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>receive_buffer_len</em> = <code><a class="el" href="CBUS_8h.html#aa4ab80178bfb7c9b9ad8e2c251482fd2">EX_BUFFER_LEN</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>num_send_contexts</em> = <code><a class="el" href="CBUS_8h.html#a6f46ab1bb4a2e87ccfe8047a6bfe9be1">NUM_EX_CONTEXTS</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allocate memory for receive and send contexts </p>

</div>
</div>
<a id="ab668468a0918e79b0dcbd7ac87c62524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab668468a0918e79b0dcbd7ac87c62524">&#9670;&nbsp;</a></span>is_sending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t CBUSLongMessageEx::is_sending </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>report state of long message sending returns number of streams currently in progress </p>

</div>
</div>
<a id="aa95b3c27714bedaf8c78d392e5a7d392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa95b3c27714bedaf8c78d392e5a7d392">&#9670;&nbsp;</a></span>process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CBUSLongMessageEx::process </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>the process method is called regularly from the user's loop function we use this to send the individual fragments of any outgoing messages and check the message receive timeouts </p>
<p>check receive timeout for each active context</p>
<p>send the next outgoing fragment from each active context, after a configurable delay to avoid flooding the bus concurrent streams will be interleaved</p>
<p>only the last fragment is potentially less than 5 bytes long</p>

</div>
</div>
<a id="a035efe13743c2a713434f35a84236a43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035efe13743c2a713434f35a84236a43">&#9670;&nbsp;</a></span>processReceivedMessageFragment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CBUSLongMessageEx::processReceivedMessageFragment </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="CBUSCircularBuffer_8h.html#classCANFrame">CANFrame</a> &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>handle an incoming long message CBUS message fragment </p>

<p>Reimplemented from <a class="el" href="classCBUSLongMessage.html#a178ec4c71692444d3ca601af8a8e0ff0">CBUSLongMessage</a>.</p>

</div>
</div>
<a id="a68565f494c27692d8ffa81aafd2fadfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68565f494c27692d8ffa81aafd2fadfc">&#9670;&nbsp;</a></span>sendLongMessage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CBUSLongMessageEx::sendLongMessage </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>msg_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>stream_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>priority</em> = <code><a class="el" href="CBUS_8h.html#a0756f011ef667460d583017366823244">DEFAULT_PRIORITY</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>initiate sending of a long message this method sends the first message - the header packet the remainder of the message is sent in fragments from the <a class="el" href="classCBUSLongMessageEx.html#aa95b3c27714bedaf8c78d392e5a7d392">process()</a> method </p>

</div>
</div>
<a id="a37181f114e927d90b26c8e2ff8854f14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37181f114e927d90b26c8e2ff8854f14">&#9670;&nbsp;</a></span>subscribe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CBUSLongMessageEx::subscribe </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>stream_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>num_stream_ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *<a class="el" href="CBUSACAN2040_8cpp.html#a8a9bf1c088ccfcbd220ac27a3ee6a7dc">msg</a>, uint32_t msg_len, uint8_t stream_id, uint8_t status)&#160;</td>
          <td class="paramname"><em>messagehandler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>subscribe to a range of stream IDs </p>

</div>
</div>
<a id="a99490d640c0524624e498cf72d67484f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99490d640c0524624e498cf72d67484f">&#9670;&nbsp;</a></span>use_crc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CBUSLongMessageEx::use_crc </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_crc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set whether to calculate and compare a CRC of the message </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/CBUSPicoLib/<a class="el" href="CBUS_8h_source.html">CBUS.h</a></li>
<li>src/CBUSPicoLib/<a class="el" href="CBUSLongMessage_8cpp.html">CBUSLongMessage.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCBUSLongMessageEx.html">CBUSLongMessageEx</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
